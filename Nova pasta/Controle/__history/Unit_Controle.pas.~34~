unit Unit_Controle;

interface
    uses System.SysUtils,Winapi.Messages, Vcl.Controls,Vcl.Dialogs;
type
TControle = class
  private

  public
    procedure getCadPessoa;
    procedure getCadPfPj(id:integer);
end;

implementation

{ TControle }

uses Form_CadPessoa,
     Objeto_CadPessoa,
     Objeto_CadPessoaFisica,
     Objeto_CadPessoaJuridica;




procedure TControle.getCadPfPj(id:integer);
var
      VCadPF:CadPessoaFisica;
      VCadPJ:CadPessoaJuridica;
begin
    if (Cliente = nil) then
    Cliente := TCliente.Create(nil);
    VCadPF := CadPessoaFisica.Create;
    VCadPJ := CadPessoaJuridica.Create;
    if (Cliente.rdCNPJ.Checked) then
      begin
        VCadPJ.setcnpj(Cliente.edCpfCnpj.Text);
        VCadPJ.setPessoa_idPessoa(id);
        VCadPJ.insertDados;
      end;
      if (not Cliente.rdCNPJ.Checked) then
      begin
        VCadPF.setcpf(Cliente.edCpfCnpj.Text);
        VCadPF.setPessoa_idPessoa(id);
        VCadPF.insertDados;
      end;


end;

procedure TControle.getCadPessoa;
    var
    VCadPessoa:CadPessoa;


begin
    if (Cliente = nil) then
      Cliente := TCliente.Create(nil);

    if (Cliente.ShowModal = mrOk) then
      begin
          VCadPessoa := CadPessoa.Create;
         case(Cliente.getFuncao) of
            1: begin
               VCadPessoa.setnome(Cliente.edNome.Text);
               VCadPessoa.insertDados;

               self.getCadPfPj(VCadPessoa.getLastId);


            end;
            2: begin

            end;
         end;
         VCadPessoa.Free;

      end;

      FreeAndNil(Cliente);

end;



end.
